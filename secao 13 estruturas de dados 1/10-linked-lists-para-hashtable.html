<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Tabelas Hash</title>

        <!--estilizando com css-->
        <style></style>

    </head>

    <body>

        <h1>Listas ligadas para Tabelas Hash</h1>

        <h2></h2>

        <p>
            
        </p>
        

        <script>
            
            class HashNode{
                constructor(key, value){
                    this.key = key
                    this.value = value
                    this.next = null
                }
            }

            class LinkedList{
                #size
                constructor(){
                    this.head = null
                    this.tail = null
                    this.#size = 0
                }

                append(key, value, replace){                      //adiciona no final da lista
                    //verificando se a chave já existe.
                    let current = this.head

                    while(current){
                        if(current.key === key){
                            if(replace){
                                current.value = value
                            } else{
                                throw Error('Chave já existe. Mude a chave ou passe true no terceiro parâmetro para substituir o valor da chave existente')
                            }
                            return undefined
                        }
                        current = current.next
                    }

                    const newNode = new HashNode(key, value)

                    if(this.head === null){             //estou adicionando o primeiro elemento da lista
                        this.head = newNode
                        this.tail = newNode
                    }else{                              //se não é o primeiro elemento da lista
                        const last = this.tail
                        last.next = newNode
                        this.tail = newNode
                    }
                    this.#size++
                }

                getByKey(key){                          //retorna valor pela chave
                    let current = this.head

                    while(current){
                        if(current.key === key){
                            return current.value
                        }
                        current = current.next
                    }
                    return false
                }


                remove(key){                          //remover o valor
                    let current = this.head
                    let prev = null

                    while(current){
                        if(current.key === key){
                            if(prev){
                                prev.next = current.next
                                //se o nó removido for o tail, atualiza o tail
                                if(current === this.tail){
                                    this.tail = prev;
                                }
                                current.next = null
                            }else{
                                this.head = current.next
                                //se removemos o único elemento da lista, atualiza o tail
                                if(current === this.tail){
                                    this.tail = null;
                                }
                                current.next = null
                            }
                            this.#size--
                            return true
                        }
                        prev = current
                        current = current.next
                    }
                    return false
                }


                isEmpty(){                              //está vazio
                    return this.head === null
                }

                get size(){                         //o tamanho
                    return this.#size
                }

                print(){
                    let current = this.head
                    let result = ""
                    while(current){
                        result += current.value + " --> "
                        current = current.next
                    }
                    console.log(result + " ----- Size: " + this.#size)
                }

            }

            
            class HashTable{
                constructor(){

                }
            }
            
            
        </script>
        
    </body>
</html>